<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quick Exam</title>
    <link rel="stylesheet" href="/HSC-Full-Course/Exam-Assets/css/app.css" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-analytics.js"></script>
    <script src="/BioDictionary/Assets/js/firebase.js"></script>
    <link rel="shortcut icon" href="/HSC-Full-Course/assets/images/logo/icon.ico" type="image/x-icon">
    <link rel="icon" href="/HSC-Full-Course/assets/images/Logo-with-Name.png">
    <link rel="apple-touch-icon" href="/HSC-Full-Course/assets/images/Logo-with-Name.png">
</head>

<body>
    <div class="container">
        <div id="home" class="flex-center flex-column">
            <img src="/HSC-Full-Course/assets/images/Logo-with-Name.png" style="margin-bottom: 30px;" alt="Logo" height="100px">
            <h1>Quick Exam</h1>
            <a class="btn" onclick="checkPass()">Start Exam</a>
            <a class="btn" href="highscores.html">High Scores</a>
            <a class="btn" onclick="close_window()">Close</a>
            <p class="cred text-center">Contributor : Maheyan Mridul</p>
        </div>
    </div>
    <script>
        function close_window() {
            if (confirm("Close Quick Exam?")) {
                close();
            }
        }

        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                email = user.email;

                function checkPass() {
                    swal("Write something here:", {
                            content: "input"
                        })
                        .then((value) => {
                            const a = value;
                            var user = firebase.auth().currentUser;
                            var credential = firebase.auth.EmailAuthProvider.credential(email, a);

                            user.reauthenticateWithCredential(credential).then(function() {
                                const b = confirmPassword.value;
                                user.updatePassword(b).then(function() {
                                    swal({
                                        title: "Password Matched!",
                                        text: "Please wait!",
                                        icon: "success",
                                        button: "Click Me!",
                                    });
                                }).catch(function(error) {
                                    alert(error.message);
                                });
                            }).catch(function(error) {
                                alert("Invalid Current Password.\nPlease correct it!");
                            });
                        });
                }
            } else {
                location.replace("/BioDictionary/login.html");
            }
        });
    </script>
</body>

</html>